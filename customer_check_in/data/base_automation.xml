<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="base_automation_on_registration_remaining_entries_change" model="base.automation">
        <field name="name">On Registration Remaining Entries Change</field>
        <field name="action_server_ids" eval="[(6, 0, [ref('action_set_registration_done')])]"/>
        <field name="model_id" ref="event.model_event_registration"/>
        <field name="on_change_field_ids" eval="[(6, 0, [ref('x_remaining_entries_field_event_registration')])]"/>
        <field name="filter_domain">[('id', '!=', False), ('x_remaining_entries', '&lt;=', 0), ('state', 'in', ['open'])]</field>
        <field name="trigger">on_change</field>
    </record>
    <!-- Comment le faire tourner également si la date limite est dépassée ?-->
    <record id="base_automation_on_recurring_access_event_created" model="base.automation">
        <field name="name">On Recurring Access Event Created</field>
        <field name="model_id" ref="event.model_event_event"/>
        <field name="action_server_ids" eval="[(6, 0, [ref('action_plan_event_end_date_far_away')])]"/>
        <field name="filter_domain">[('x_recurring_access', '!=', False)]</field>
        <field name="trigger">on_create</field>
    </record>
</odoo>
