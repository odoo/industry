<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="product_route" model="ir.actions.server">
        <field name="name">Route displaying products</field>
        <field name="model_id" ref="product.model_product_product"/>
        <field name="state">code</field>
        <field name="website_published">True</field>
        <field name="website_path">products</field>
        <field name="code"><![CDATA[
response = request.render('3pl_logistic_company.portal_products')
]]></field>
    </record>
    <record id="action_change_product_storable_lots" model="ir.actions.server">
        <field name="code"><![CDATA[
record.write({'is_storable': True, 'tracking': 'lot'})
]]></field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="state">code</field>
        <field name="name">Execute Code</field>
    </record>
    <record id="action_update_move_line_owner" model="ir.actions.server">
        <field name="code"><![CDATA[
for move_line in records:
    move_line['owner_id'] = move_line.product_id.x_owner_id
]]></field>
        <field name="model_id" ref="stock.model_stock_move_line"/>
        <field name="state">code</field>
        <field name="name">Execute Code</field>
    </record>
    <record id="action_update_stock_move_owner" model="ir.actions.server">
        <field name="code"><![CDATA[
for pick in records:
    first_owner = pick.move_ids[:1].product_id.x_owner_id
    if first_owner and all(move.product_id.x_owner_id == first_owner for move in pick.move_ids):
        pick.write({'owner_id': first_owner})
]]></field>
        <field name="model_id" ref="stock.model_stock_picking"/>
        <field name="state">code</field>
        <field name="name">Execute Code</field>
    </record>
    <record id="server_action_account_move_create_next" model="ir.actions.server">
        <field name="code"><![CDATA[
new_invoice = record.copy()
date_from_sale_subscription_plan = dateutil.relativedelta.relativedelta()
match record.x_invoice_period_id.billing_period_unit:
    case 'week':
        date_from_sale_subscription_plan = dateutil.relativedelta.relativedelta(weeks=record.x_invoice_period_id.billing_period_value)
    case 'month':
        date_from_sale_subscription_plan = dateutil.relativedelta.relativedelta(months=record.x_invoice_period_id.billing_period_value)
    case 'year':
        date_from_sale_subscription_plan = dateutil.relativedelta.relativedelta(years=record.x_invoice_period_id.billing_period_value)
new_invoice['invoice_date'] = record.invoice_date + date_from_sale_subscription_plan
new_invoice.invoice_line_ids.write({'quantity': 0})
action = {
    'view_mode': 'form',
    'res_model': 'account.move',
    'res_id': new_invoice.id,
    'type': 'ir.actions.act_window',
}
]]></field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="state">code</field>
        <field name="name">3PL Logistic Company: Invoice - create next action</field>
    </record>
</odoo>
