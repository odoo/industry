<?xml version='1.0' encoding='UTF-8'?>
<odoo>
  <record id="planning_model_planning_role_x_is_a_room_offer_field" model="ir.model.fields">
    <field name="ttype">boolean</field>
    <field name="copied" eval="True"/>
    <field name="field_description">Is Room Offer</field>
    <field name="model_id" ref="planning.model_planning_role"/>
    <field name="name">x_is_a_room_offer</field>
  </record>
  <record id="base_model_res_partner_x_nationality_field" model="ir.model.fields">
    <field name="ttype">many2one</field>
    <field name="copied" eval="True"/>
    <field name="field_description">Nationality</field>
    <field name="model_id" ref="base.model_res_partner"/>
    <field name="name">x_nationality</field>
    <field name="relation">res.country</field>
  </record>
  <record id="base_model_res_partner_x_document_type_field" model="ir.model.fields">
    <field name="ttype">selection</field>
    <field name="copied" eval="True"/>
    <field name="field_description">Document Type</field>
    <field name="model_id" ref="base.model_res_partner"/>
    <field name="name">x_document_type</field>
    <field name="selection">[('Passport', 'Passport'), ('ID card', 'ID card'), ('Driving license', 'Driving license')]</field>
  </record>
  <record id="base_model_res_partner_x_document_number_field" model="ir.model.fields">
    <field name="ttype">char</field>
    <field name="copied" eval="True"/>
    <field name="field_description">Document Number</field>
    <field name="model_id" ref="base.model_res_partner"/>
    <field name="name">x_document_number</field>
  </record>
  <record id="sale_model_sale_order_x_guests_field" model="ir.model.fields">
    <field name="ttype">many2many</field>
    <field name="copied" eval="True"/>
    <field name="field_description">Guests</field>
    <field name="model_id" ref="sale.model_sale_order"/>
    <field name="name">x_guests</field>
    <field name="relation">res.partner</field>
    <field name="relation_table">x_res_partner_sale_order_rel</field>
  </record>
  <record id="base_model_res_partner_x_identity_check_field" model="ir.model.fields">
    <field name="compute"><![CDATA[for record in self:
    if not record.x_nationality and not record.x_document_type and not record.x_document_number:
        record['x_identity_check'] = 'na'
    elif record.x_nationality and record.x_document_type and record.x_document_number:
        record['x_identity_check'] = 'ok'
    else:
        record['x_identity_check'] = 'invalid'
]]></field>
    <field name="ttype">selection</field>
    <field name="selection">[('na', 'NA'), ('ok', 'OK'), ('invalid', 'Invalid')]</field>
    <field name="depends">x_nationality, x_document_type, x_document_number</field>
    <field name="field_description">Identity Check</field>
    <field name="model_id" ref="base.model_res_partner"/>
    <field name="name">x_identity_check</field>
    <field name="readonly" eval="True"/>
    <field name="selectable" eval="False"/>
    <field name="store" eval="False"/>
  </record>
  <record id="product_model_product_template_x_is_a_room_offer_field" model="ir.model.fields">
    <field name="ttype">boolean</field>
    <field name="copied" eval="True"/>
    <field name="field_description">Is Room Offer</field>
    <field name="model_id" ref="product.model_product_template"/>
    <field name="name">x_is_a_room_offer</field>
    </record>
  <record id="product_model_product_template_x_is_stay_tax_field" model="ir.model.fields">
    <field name="ttype">boolean</field>
    <field name="copied" eval="True"/>
    <field name="field_description">Is City Tax</field>
    <field name="model_id" ref="product.model_product_template"/>
    <field name="name">x_is_stay_tax</field>
  </record>
  <record id="sale_model_sale_order_x_nights_field" model="ir.model.fields">
    <field name="ttype">integer</field>
    <field name="field_description">Nights</field>
    <field name="readonly" eval="True"/>
    <field name="model_id" ref="sale.model_sale_order_line"/>
    <field name="copied" eval="False"/>
    <field name="name">x_nights</field>
  </record>
  <record id="sale_order_x_order_involves_room" model="ir.model.fields">
    <field name="ttype">boolean</field>
    <field name="field_description">Order Involves Room</field>
    <field name="model_id" ref="sale.model_sale_order"/>
    <field name="name">x_order_involves_room</field>
    <field name="compute"><![CDATA[for record in self:
    record['x_order_involves_room'] = any(line.product_id.x_is_a_room_offer for line in record.order_line)
]]></field>
    <field name="depends">order_line</field>
  </record>
    <record id="sale_model_sale_order_x_picked_up" model="ir.model.fields">
    <field name="ttype">boolean</field>
    <field name="field_description">Picked up</field>
    <field name="readonly" eval="True"/>
    <field name="model_id" ref="sale.model_sale_order"/>
    <field name="name">x_picked_up</field>
    <field name="compute"><![CDATA[for record in self:
    record['x_picked_up'] = False
    if record.state == 'sale' and record.is_rental_order:
        rental_order_lines = record.order_line.filtered(lambda line: line.is_rental and line.product_type != 'combo')
        record['x_picked_up'] = not any(sol.qty_delivered < sol.product_uom_qty for sol in rental_order_lines)
]]></field>
    <field name="depends">order_line.qty_delivered</field>
  </record>
  <record id="res_partner_x_guests_count" model="ir.model.fields">
    <field name="compute"><![CDATA[for record in self: 
    record['x_guests_count'] = self.env['sale.order'].search_count([('x_guests', '=', record.id)])
]]></field>
    <field name="ttype">integer</field>
    <field name="field_description">Guests count</field>
    <field name="model_id" ref="base.model_res_partner"/>
    <field name="selectable" eval="False"/>
    <field name="store" eval="False"/>
    <field name="name">x_guests_count</field>
  </record>
  <record id="resource_x_on_going_booking" model="ir.model.fields">
    <field name="ttype">one2many</field>
    <field name="domain">[('sale_line_id.qty_delivered', '&gt;', 0), ('sale_line_id.qty_returned', '=', 0)]</field>
    <field name="field_description">Ongoing Booking</field>
    <field name="model_id" ref="resource.model_resource_resource"/>
    <field name="relation">planning.slot</field>
    <field name="relation_field">resource_id</field>
    <field name="name">x_ongoing_booking</field>
  </record>
  <record id="resource_x_occupant" model="ir.model.fields">
    <field name="name">x_occupant</field>
    <field name="field_description">Occupant</field>
    <field name="ttype">many2one</field>
    <field name="model_id" ref="resource.model_resource_resource"/>
    <field name="relation">res.partner</field>
    <field name="readonly" eval="True"/>
    <field name="depends">x_ongoing_booking.partner_id</field>
    <field name="compute"><![CDATA[for record in self:
    booking = record.x_ongoing_booking
    record['x_occupant'] = booking[:1].partner_id.id
]]></field>
  </record>
  <record id="res_partner_x_ongoing_bookings" model="ir.model.fields">
    <field name="ttype">one2many</field>
    <field name="field_description">Ongoing Bookings</field>
    <field name="model_id" ref="base.model_res_partner"/>
    <field name="relation">resource.resource</field>
    <field name="relation_field">x_occupant</field>
    <field name="readonly" eval="True"/>
    <field name="name">x_ongoing_bookings</field>
  </record>
</odoo>
