<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="project_project_form_view" model="ir.ui.view">
        <field name="name">project.project.form.software_reseller</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="mode">extension</field>
        <field name="priority">240</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='group_time_managment']/parent::group" position="after">
                <group>
                    <group name="group_licence_management" string="License" col="1" class="row mt16 o_settings_container">
                        <div>
                            <setting class="col-lg-12" help="Make the project visible in the Licences app" id="x_is_licence_id">
                                <field name="x_is_license" />
                                <div class="content-group" invisible="not x_software">
                                    <div class="mt16">
                                        <label for="x_software" class="mr8"/>
                                        <field name="x_software" class="oe_inline"/>
                                    </div>
                                </div>
                            </setting>
                        </div>
                    </group>
                </group>
            </xpath>
        </field>
    </record>
    <record id="view_project_task_form_inherit_project" model="ir.ui.view">
        <field name="name">project.task.form.software_reseller</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="active" eval="True"/>
        <field name="mode">extension</field>
        <field name="priority">1000</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <xpath expr="//group/field[@name='partner_id']" position="attributes">
                <attribute name="invisible">False</attribute>
            </xpath>
            <xpath expr="//group/field[@name='sale_order_id']" position="attributes">
                <attribute name="invisible">False</attribute>
            </xpath>
        </field>
    </record>
    <record id="view_project_task_form_inherit_project_sms" model="ir.ui.view">
        <field name="inherit_id" ref="project.task_type_edit"/>
        <field name="mode">extension</field>
        <field name="active" eval="True"/>
        <field name="model">project.task.type</field>
        <field name="name">project.task.type.form.software_reseller</field>
        <field name="priority">160</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='sequence']" position="after">
                <field name="x_expiration_check"/>
            </xpath>
        </field>
    </record>
    <record id="view_res_partner_form_inherit" model="ir.ui.view">
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="mode">extension</field>
        <field name="model">res.partner</field>
        <field name="active" eval="True"/>
        <field name="name">res.partner.form.software_reseller</field>
        <field name="priority">360</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_open_employees']" position="after">
                <button class="oe_stat_button" icon="fa-code" type="action" name="%(licenses_act_window)d">
                    <field widget="statinfo" name="x_partner_id_project_task_count" string="Licenses"/>
                </button>
            </xpath>
        </field>
    </record>
    <record id="view_project_task_list_inherit" model="ir.ui.view">
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="mode">primary</field>
        <field name="model">project.task</field>
        <field name="active" eval="True"/>
        <field name="name">project.task.list.software_reseller</field>
        <field name="priority">16</field>
        <field name="type">list</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='stage_id']" position="replace"/>
            <xpath expr="//field[@name='tag_ids']" position="replace"/>
            <xpath expr="//field[@name='activity_ids']" position="replace"/>
            <xpath expr="//list/field[@name='progress'][2]" position="replace"/>
            <xpath expr="//list/field[@name='effective_hours'][2]" position="replace"/>
            <xpath expr="//field[@name='state']" position="after">
                <field name="x_software" optional="show"/>
                <field name="x_version" optional="show"/>
            </xpath>
            <xpath expr="//field[@name='project_id']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="attributes">
                <attribute name="optional">show</attribute>
                <attribute name="invisible">False</attribute>
            </xpath>
            <xpath expr="//field[@name='date_deadline']" position="attributes">
                <attribute name="column_invisible">False</attribute>
                <attribute name="invisible">False</attribute>
                <attribute name="optional">show</attribute>
            </xpath>
        </field>
    </record>
    <record id="view_hr_employee_kanban_inherit" model="ir.ui.view">
        <field name="inherit_id" ref="hr.hr_kanban_view_employees"/>
        <field name="mode">extension</field>
        <field name="model">hr.employee</field>
        <field name="active" eval="True"/>
        <field name="name">hr.employee.kanban.software_reseller</field>
        <field name="priority">99</field>
        <field name="type">kanban</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='employee_properties']" position="after">
                <field name="default_planning_role_id" display="full"/>
            </xpath>
        </field>
    </record>
    <record id="all_licenses_act_window" model="ir.actions.act_window">
        <field name="view_ids" eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'list', 'view_id': ref('view_project_task_list_inherit')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('view_project_task_form_inherit_project')}),
        ]"/>
    </record>
</odoo>
