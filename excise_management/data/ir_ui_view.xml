<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="x_excise_category_view_list" model="ir.ui.view">
        <field name="name">x_excise_category.view.list</field>
        <field name="model">x_excise_category</field>
        <field name="type">list</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <list editable="bottom">
                <field name="x_sequence" widget="handle"/>
                <field name="x_name"/>
                <field name="x_description" optional="show"/>
                <field name="x_unit_id" string="Reporting unit"/>
            </list>
        </field>
    </record>
    <record id="product_template_view_form" model="ir.ui.view">
        <field name="name">product.template.form.view.inherit.excise</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="model">product.template</field>
        <field name="priority">1600</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='general_information']/group[@name='internal_notes']" position="before">
                <group>
                    <group name="excise" string="Excises">
                        <label for="x_excise_category"/>
                        <div class="d-flex" name="deposit">
                            <field name="x_excise_category" class="oe_inline" options="{'no_open': True, 'no_create': True}"/>
                            <field name="x_excise_description" force_save="1" readonly="True"/>
                        </div>
                        <label for="x_excise_amount" invisible="not x_excise_category"/>
                        <div class="d-flex" name="excise_amount" invisible="not x_excise_category">
                            <field name="x_currency_symbol" class="oe_inline" force_save="1"/>
                            <field name="x_excise_amount" class="oe_inline" force_save="1" options="{'digits':[8,4]}"/>
                        </div>
                        <label for="x_excise_quantity" invisible="not x_excise_category"/>
                        <div class="d-flex" name="excise_quantity" invisible="not x_excise_category">
                            <field name="x_excise_quantity" class="oe_inline" force_save="1" options="{'digits':[8,6]}"/>
                            <field name="x_excise_unit" force_save="1" readonly="True" options="{'no_open': True}"/>
                        </div> 
                    </group>
                </group>
            </xpath>
        </field>
    </record>
    <record id="stock_move_view_pivot" model="ir.ui.view">
        <field name="name">stock.move.view.pivot.excise</field>
        <field name="model">stock.move</field>
        <field name="priority">99</field>
        <field name="type">pivot</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <pivot string="Excises Analysis">
                <field name="x_excise_quantity" type="measure" options="{'digits':[8,4]}"/>
                <field name="x_excise_category" type="col"/>
                <field name="x_excise_unit" type="col"/>
                <field name="date" type="row"/>
                <field name="x_fiscal_deposit_move" type="row"/>
            </pivot>
        </field>
    </record>
    <record id="stock_move_view_search" model="ir.ui.view">
        <field name="name">stock.move.view.search.inherit.excise</field>
        <field name="inherit_id" ref="stock.view_move_search"/>
        <field name="model">stock.move</field>
        <field name="priority">99</field>
        <field name="type">search</field>
        <field name="mode">primary</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='ready']" position="replace"/>
            <xpath expr="//filter[@name='future']" position="replace"/>
            <xpath expr="//filter[@name='done']" position="replace"/>
        </field>
    </record>
    <record id="stock_warehouse_view_form" model="ir.ui.view">
        <field name="name">stock.warehouse.view.form.inherit.excise</field>
        <field name="inherit_id" ref="stock.view_warehouse"/>
        <field name="model">stock.warehouse</field>
        <field name="priority">160</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='resupply_wh_ids']" position="after">
                <field name="x_is_fiscal_deposit"/>
            </xpath>
        </field>
    </record>
    <record id="account_fiscal_position_view_form" model="ir.ui.view">
        <field name="name">account.fiscal.position.form.inherit.excise</field>
        <field name="inherit_id" ref="account.view_account_position_form"/>
        <field name="model">account.fiscal.position</field>
        <field name="priority">160</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="x_is_fiscal_deposit"/>
            </xpath>
        </field>
    </record>
    <record id="stock_move_view_list" model="ir.ui.view">
        <field name="name">stock.move.view.list.excise</field>
        <field name="model">stock.move</field>
        <field name="priority">99</field>
        <field name="active" eval="True"/>
        <field name="type">list</field>
        <field name="arch" type="xml">
            <list default_order="date, picking_id, sequence" string="Moves" create="0">
                <field name="date_deadline" optional="hide"/>
                <field name="date" optional="show"/>
                <field name="x_fiscal_deposit_move" optional="show"/>
                <field name="product_id" optional="show"/>
                <field name="product_uom" optional="show" groups="uom.group_uom" widget="many2one_uom"/>
                <field name="product_uom_qty" optional="show"/>
                <field name="x_excise_category" optional="show"/>
                <field name="x_excise_amount" optional="show"/>
                <field name="x_currency_id" column_invisible="True"/>
                <field name="x_excise_quantity" optional="show" options="{'digits':[8,6]}"/>
                <field name="x_excise_unit" optional="show"/>
            </list>
        </field>
    </record>
     <record id="view_picking_form" model="ir.ui.view">
        <field name="name">stock.picking.form.inherit.external.id</field>
        <field name="model">stock.picking</field>
        <field name="active" eval="True"/>
        <field name="inherit_id" ref="stock.view_picking_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='origin']" position="after">
                <field name="x_external_id" />
            </xpath>
        </field>
    </record>
    <record id="action_account_move_pickings" model="ir.actions.act_window">
        <field name="context">{'search_default_x_invoice_ids': active_id,'default_x_invoice_ids': [active_id]}</field>
        <field name="domain">[('x_invoice_ids', '=', active_id)]</field>
        <field name="name">Pickings</field>
        <field name="res_model">stock.picking</field>
    </record>
    <record id="action_excise_report_stock_moves" model="ir.actions.act_window">
        <field name="context">{'search_default_x_excise_report_id': active_id,'default_x_excise_report_id': active_id}</field>
        <field name="domain">[('x_excise_report_id', '=', active_id)]</field>
        <field name="name">Moves</field>
        <field name="res_model">stock.move</field>
        <field name="view_ids" eval="[
            (5, 0, 0),
            (0, 0, {'view_mode': 'list', 'view_id': ref('stock_move_view_list')}),
        ]"/>
    </record>
    <record id="view_move_form_inherit_picking_button" model="ir.ui.view">
        <field name="name">account.move.form.inherit.picking.button</field>
        <field name="model">account.move</field>
        <field name="active" eval="True"/>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet//div[@name='button_box']" position="inside">
                <button class="oe_stat_button" icon="fa-truck" type="action" name="%(action_account_move_pickings)d">
                    <field widget="statinfo" name="x_external_id_count" string="External Transfers"/>
                </button>
            </xpath>
            <xpath expr="//group[@name='sale_info_group']//field[@name='delivery_date']" position="after">
                <field name="x_external_ids" widget="many2many_tags" />
            </xpath>
        </field>
    </record>
    <record id="list_view_x_excise_report" model="ir.ui.view">
        <field name="name">Excise Report</field>
        <field name="model">x_excise_report</field>
        <field name="active" eval="True"/>
        <field name="type">list</field>
        <field name="arch" type="xml">
            <list name="excise_report" create="0">
                <field name="x_name" />
                <field name="x_period" />
                <field name="x_external_id" />
                <field name="activity_ids" optional="show" widget="list_activity"/>
                <field name="x_state" />
            </list>
        </field>
    </record>
    <record id="form_view_x_excise_report" model="ir.ui.view">
        <field name="name">Excise Report</field>
        <field name="model">x_excise_report</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <form name="excise_report" string="Excise Report" create="0">
                <header>
                    <button string="Mark as Done" name="%(update_excise_report_to_done)d" type="action" invisible="x_state == 'done'"/>
                    <field name="x_state" widget="statusbar" />
                </header>
                <sheet>
                    <div name="button_box" class="oe_button_box">
                        <button class="oe_stat_button" icon="fa-truck" type="action" name="%(action_excise_report_stock_moves)d">
                            <field widget="statinfo" name="x_move_id_count" string="Moves"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="x_name" placeholder="Name..." readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="x_period" readonly="1"/>
                        </group>
                        <group>
                            <field name="x_external_id"/>
                            <field name="x_document"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Details" name="lines">
                            <field name="x_lines_ids">
                                <list default_group_by="x_excise_category_id" create="0" edit="0" editable="bottom" open_form_view="True">
                                    <field name="x_currency_id" column_invisible="1"/>
                                    <field name="x_excise_category_id"/>
                                    <field name="x_excise_move_type"/>
                                    <field name="x_excise_quantity"/>
                                    <field name="x_excise_unit"/>
                                    <field name="x_excise_amount"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>
    <record id="search_view_x_excise_report" model="ir.ui.view">
        <field name="name">Excise Report Search View</field>
        <field name="model">x_excise_report</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <search>
                <field name="x_external_id"/>
                <filter domain="[('activity_state', '=', 'planned')]" name="to_do_filter" string="To do"/>
                <filter domain="[('x_state', '=', 'done')]" name="done_state_filter" string="Done"/>
                <group name="studio_group_by"/>
                <filter name="studio_group_by_state" string="State" context="{'group_by': 'x_state'}"/>
            </search>
        </field>
    </record>
    <record id="res_config_settings_view_form_reporter" model="ir.ui.view">
        <field name="name">res.config.settings.view_form.reporter</field>
        <field name="model">res.config.settings</field>
        <field name="active" eval="True"/>
        <field name="inherit_id" ref="stock.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//app[@name='stock']" position="inside">
                <block title="Excises" name="excises_reporter_setting">
                    <setting>
                        <div title="Designated contact receiving weekly report activity">
                            <label for="x_reporter_id"/>
                            <field name="x_reporter_id" class="text-center"/>
                        </div>
                        <div class="text-muted">
                            Designated contact receiving weekly report activity
                        </div>
                    </setting>
                </block>
            </xpath>
        </field>
    </record>
</odoo>
