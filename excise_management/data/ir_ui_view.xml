<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="x_excise_category_view_list" model="ir.ui.view">
        <field name="name">x_excise_category.view.list</field>
        <field name="model">x_excise_category</field>
        <field name="type">list</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <list editable="bottom">
                <field name="x_sequence" widget="handle"/>
                <field name="x_name"/>
                <field name="x_description" optional="show"/>
                <field name="x_unit_id" string="Reporting unit"/>
            </list>
        </field>
    </record>
    <record id="product_template_view_form" model="ir.ui.view">
        <field name="name">product.template.form.view.inherit.excise</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="model">product.template</field>
        <field name="priority">1600</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='general_information']/group[@name='internal_notes']" position="before">
                <group>
                    <group name="excise" string="Excises">
                        <label for="x_excise_category"/>
                        <div class="d-flex" name="deposit">
                            <field name="x_excise_category" class="oe_inline" options="{'no_open': True, 'no_create': True}"/>
                            <field name="x_excise_description" force_save="1" readonly="True"/>
                        </div>
                        <label for="x_excise_amount" invisible="not x_excise_category"/>
                        <div class="d-flex" name="excise_amount" invisible="not x_excise_category">
                            <field name="x_currency_symbol" class="oe_inline" force_save="1"/>
                            <field name="x_excise_amount" class="oe_inline" force_save="1" options="{'digits':[8,4]}"/>
                        </div>
                        <label for="x_excise_quantity" invisible="not x_excise_category"/>
                        <div class="d-flex" name="excise_quantity" invisible="not x_excise_category">
                            <field name="x_excise_quantity" class="oe_inline" force_save="1" options="{'digits':[8,6]}"/>
                            <field name="x_excise_unit" force_save="1" readonly="True" options="{'no_open': True}"/>
                        </div> 
                    </group>
                </group>
            </xpath>
        </field>
    </record>
    <record id="stock_move_view_pivot" model="ir.ui.view">
        <field name="name">stock.move.view.pivot.excise</field>
        <field name="model">stock.move</field>
        <field name="priority">99</field>
        <field name="type">pivot</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <pivot string="Excises Analysis">
                <field name="x_excise_quantity" type="measure" options="{'digits':[8,4]}"/>
                <field name="x_excise_amount" type="measure"/>
                <field name="x_excise_category" type="col"/>
                <field name="x_excise_unit" type="col"/>
                <field name="date" interval="week" type="row"/>
                <field name="x_fiscal_deposit_move" type="row"/>
            </pivot>
        </field>
    </record>
    <record id="stock_move_view_search" model="ir.ui.view">
        <field name="name">stock.move.view.search.inherit.excise</field>
        <field name="inherit_id" ref="stock.view_move_search"/>
        <field name="model">stock.move</field>
        <field name="priority">99</field>
        <field name="type">search</field>
        <field name="mode">primary</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='ready']" position="replace"/>
            <xpath expr="//filter[@name='future']" position="replace"/>
            <xpath expr="//filter[@name='done']" position="replace"/>
        </field>
    </record>
    <record id="stock_warehouse_view_form" model="ir.ui.view">
        <field name="name">stock.warehouse.view.form.inherit.excise</field>
        <field name="inherit_id" ref="stock.view_warehouse"/>
        <field name="model">stock.warehouse</field>
        <field name="priority">160</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='resupply_wh_ids']" position="after">
                <field name="x_is_fiscal_deposit"/>
            </xpath>
        </field>
    </record>
    <record id="account_fiscal_position_view_form" model="ir.ui.view">
        <field name="name">account.fiscal.position.form.inherit.excise</field>
        <field name="inherit_id" ref="account.view_account_position_form"/>
        <field name="model">account.fiscal.position</field>
        <field name="priority">160</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="x_is_fiscal_deposit"/>
            </xpath>
        </field>
    </record>
    <record id="stock_move_view_list" model="ir.ui.view">
        <field name="name">stock.move.view.list.excise</field>
        <field name="model">stock.move</field>
        <field name="priority">99</field>
        <field name="active" eval="True"/>
        <field name="type">list</field>
        <field name="arch" type="xml">
            <list default_order="date, picking_id, sequence" string="Moves" create="0">
                <field name="date_deadline" optional="hide"/>
                <field name="date" optional="show"/>
                <field name="x_fiscal_deposit_move" optional="show"/>
                <field name="product_id" optional="show"/>
                <field name="product_uom" optional="show" groups="uom.group_uom" widget="many2one_uom"/>
                <field name="product_uom_qty" optional="show"/>
                <field name="x_excise_category" optional="show"/>
                <field name="x_excise_amount" optional="show"/>
                <field name="x_currency_id" column_invisible="True"/>
                <field name="x_excise_quantity" optional="show" options="{'digits':[8,6]}"/>
                <field name="x_excise_unit" optional="show"/>
            </list>
        </field>
    </record>
    <record id="sale_order_form_view" model="ir.ui.view">
        <field name="name">sale.order.form.inherit.excise_management</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="mode">extension</field>
        <field name="model">sale.order</field>
        <field name="priority">160</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='order_lines']//list//field[@name='tax_ids']" position="after">
                <field optional="show" name="x_excise_free_unit_price" invisible="not x_excise_free_unit_price" column_invisible="not parent.x_has_excise_line"/>
                <field optional="show" name="x_total_excises" invisible="not x_total_excises" column_invisible="not parent.x_has_excise_line"/>
                <field optional="show" name="x_total_deposits" invisible="not x_total_deposits" column_invisible="not parent.x_has_deposit_line"/>
                <field name="currency_id" column_invisible="1"/>
            </xpath>
        </field>
    </record>
    <record id="account_move_form_view" model="ir.ui.view">
        <field name="name">account.move.form.inherit.excise_management</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="active" eval="True"/>
        <field name="mode">extension</field>
        <field name="model">account.move</field>
        <field name="priority">300</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <xpath expr="//list[@name='journal_items']//field[@name='price_unit']" position="after">
                <field optional="show" name="x_excise_free_unit_price_account_move" invisible="not x_excise_free_unit_price_account_move" column_invisible="not parent.x_has_excise_line"/>
                <field optional="show" name="x_total_excises_account_move" invisible="not x_total_excises_account_move" column_invisible="not parent.x_has_excise_line"/>
                <field optional="show" name="x_total_deposits_account_move" invisible="not x_total_deposits_account_move" column_invisible="not parent.x_has_deposit_line"/>
                <field name="company_currency_id" column_invisible="1"/>
            </xpath>
        </field>
    </record>
    <record id="account_tax_group_form_view" model="ir.ui.view">
        <field name="name">account.tax.group.form.inherit.excise_management</field>
        <field name="inherit_id" ref="account.view_tax_group_form"/>
        <field name="mode">extension</field>
        <field name="model">account.tax.group</field>
        <field name="priority">99</field>
        <field name="type">form</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <xpath expr="/form//field[@name='pos_receipt_label']" position="after">
                <field name="x_is_deposit"/>
                <field name="x_is_excise"/>
            </xpath>
        </field>
    </record>
</odoo>
