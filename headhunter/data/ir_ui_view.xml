<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="applicants_customization_tree_view" model="ir.ui.view">
        <field name="name">Applicants customization</field>
        <field name="model">hr.applicant</field>
        <field name="inherit_id" ref="hr_recruitment.crm_case_tree_view_job" />
        <field name="mode">extension</field>
        <field name="active" eval="True"/>
        <field name="priority">160</field>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//field[@name='create_date']" position="after">
                    <field name="x_opportunities" optional="show" />
                </xpath>
                <xpath expr="//field[@name='availability']" position="before">
                    <field name="x_available" optional="hide" />
                </xpath>
            </data>
        </field>
    </record>
    <record id="crm_lead_customization_form_view" model="ir.ui.view">
        <field name="name">crm.lead.form.customization</field>
        <field name="model">crm.lead</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form" />
        <field name="mode">extension</field>
        <field name="active" eval="True"/>
        <field name="priority">160</field>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//button[@name='action_redirect_to_page_views']" position="replace">
                    <button class="oe_stat_button" icon="fa-users" type="action" name="%(headhunter_crm_case_categ0_act_job)d">
                        <field widget="statinfo" name="x_opportunities_count" string="Applicants" />
                    </button>
                </xpath>
            </data>
        </field>
    </record>
    <record id="jobs_recruitment_customization_form_view" model="ir.ui.view">
        <field name="name">Jobs - Recruitment Form customization</field>
        <field name="model">hr.applicant</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form" />
        <field name="mode">extension</field>
        <field name="active" eval="True"/>
        <field name="priority">500</field>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//field[@name='job_id']" position="before">
                    <field name="x_opportunities" widget="many2many_tags"/>
                </xpath>
                <xpath expr="//field[@name='linkedin_profile']" position="after">
                    <field name="x_is_shared_cv" widget="many2many_binary"/>
                </xpath>
                <xpath expr="//field[@name='priority']" position="before">
                    <field name="employee_id"/>
                </xpath>
                <xpath expr="//field[@name='type_id']" position="after">
                    <field name="x_available"/>
                </xpath>
                <xpath expr="//field[@name='availability']" position="attributes">
                    <attribute name="invisible">not x_available</attribute>
                </xpath>
            </data>
        </field>
    </record>
    <record id="hr_applicant_category_customization_search_view" model="ir.ui.view">
        <field name="name">hr.applicant.view.search.customization</field>
        <field name="model">hr.applicant</field>
        <field name="type">search</field>
        <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_search_bis" />
        <field name="mode">extension</field>
        <field name="active" eval="True"/>
        <field name="priority">160</field>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//field[@name='partner_name']" position="before">
                    <field name="x_opportunities" />
                    <field name="x_stage_name"/>
                </xpath>
                <xpath expr="//filter[@name='responsible']" position="after">
                    <filter name="group_by_opportunities" string="Opportunities" context="{'group_by': 'x_opportunities'}" />
                </xpath>
            </data>
        </field>
    </record>
    <record id="hr_kanban_view_applicant_inherit_view" model="ir.ui.view">
        <field name="name">hr.applicants.kanban.inherit.view</field>
        <field name="model">hr.applicant</field>
        <field name="active" eval="True"/>
        <field name="inherit_id" ref="hr_recruitment.hr_kanban_view_applicant"/>
        <field name="arch" type="xml">
            <xpath expr="//kanban" position="inside">
                <field name="x_available"/>
                <field name="availability"/>
            </xpath>
            <xpath expr="//t[@t-name='card']/field[@name='partner_name']" position="after">
                <t t-if="record.x_available.raw_value === false">
                    <div class="text-muted small mt-1">
                        <span class="text-danger fw-bold">Unavailable</span>
                    </div>
                </t>
                <t t-elif="record.availability.raw_value">
                    <div class="text-muted small mt-1">
                        <field class="text-warning fw-bold" name="availability"/>
                    </div>
                </t>
            </xpath>
        </field>
    </record>
    <record id="view_hr_job_form_inherit_view" model="ir.ui.view">
        <field name="name">hr.job.form.inherit.view</field>
        <field name="model">hr.job</field>
        <field name="active" eval="True"/>
        <field name="inherit_id" ref="hr.view_hr_job_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <field name="x_status_bar" widget="statusbar" options="{'clickable': '1'}"/>
                <button name="%(ir_actions_server_create_sale_order_from_job)d" string="Create Sales order" type="action" invisible="x_quotation_sales_order" class="btn-primary"/>
            </xpath>
             <xpath expr="/form//field[@name='is_published']" position="after">
                <button class="oe_stat_button" type="action" name="%(ir_actions_server_view_opportunity)d" invisible="not x_opportunity" string="Opportunity" icon="fa-tag"/>
                <button class="oe_stat_button" type="action" name="%(ir_actions_server_view_sales_order)d" invisible="not x_quotation_sales_order" string="Sales Order" icon="fa-edit"/>
                <button type="action" name="%(ir_actions_server_view_invoices)d" class="oe_stat_button" icon="fa-pencil-square-o" invisible="not x_invoice_count">
                    <field name="x_invoice_count" widget="statinfo" string="Invoices"/>
                </button>
            </xpath>
            <xpath expr="//group[@id='job_skills']/field[@name='current_job_skill_ids']" position="after">
                <field name="x_recruitment_type"/>
                <field name="x_customer" invisible="x_recruitment_type != &quot;External&quot;"/>
                <field name="x_hiring_team_contact" widget="many2many_tags_email" invisible="x_recruitment_type != &quot;External&quot;" domain="[('id', 'in', x_customer_children_ids)]"/>
                <button name="%(ir_actions_server_check_portal_access)d" string="Grant Portal Access" type="action" class="btn-primary" invisible="not x_has_portal_access"/>
            </xpath>
            <xpath expr="//page[@name='recruitment_page']/group/group[@name='hiring_process']/div" position="after">
                <field name="x_opportunity"/>
                <field name="x_quotation_sales_order"/>
                <field name="x_invoices" widget="many2many_tags"/>
            </xpath>
        </field>
    </record>
    <record id="hr_job_survey_inherit_view" model="ir.ui.view">
        <field name="name">hr.job.survery.form.inherit.view</field>
        <field name="model">hr.job</field>
        <field name="active" eval="True"/>
        <field name="inherit_id" ref="hr_recruitment.hr_job_survey"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='button_box']/button[@name='%(hr_recruitment.action_hr_job_applications)d']" position="attributes">
                <attribute name="invisible">x_status_bar == 'draft'</attribute>
            </xpath>
        </field>
    </record>
</odoo>
